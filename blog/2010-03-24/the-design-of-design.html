<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="description" content=" Earlier this month I received a draft manuscript of Frederick Brook’s latest book [The Design of Design – essays from a computer scientist](http://www.amazon.com/Design-Essays-Computer-Scientist/dp/0201362988) &lt;sup&gt;[1]&lt;/sup&gt; in which he reviews both what is design and how the design process works. Although there is plenty literature on the concept of design and the design process Brooks feels there are several good reason to write another book on the subject. The first reason that he mentions is that **the design process** has changed a lot since World War II and the new challenges have rarely been discussed. The new challenges that he mentions is that design is now a **team activity** rather than an individual one. Another challenge is that unlike designers of previous generations nowadays designers cannot longer built with their own hands what they design. Instead designs are captured in computer models and build by somebody else [p. xi]">
    <meta name="author" content="hector@hectorcorrea.com">

    <title>The Design of Design</title>

    <link rel="shortcut icon" href="/public/favicon.ico" />
    <link rel="apple-touch-icon" href="/public/favicon.png"/>

    <!-- Styles from https://newcss.net/ -->
    <link rel="stylesheet" href="https://fonts.xz.style/serve/inter.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.css">

    <link rel="me" href="https://mastodon.social/@hectorjcorrea" />
    <base href="https://hectorcorrea.com" />

    <!-- Lunr.js for searching, Mark.js for highlighting search results -->
    <script src="/public/lunr.min.js"></script>
    <script src="/public/mark.min.js"></script>

    <style>
      img {
        padding: 5px;
        box-shadow: 3px 3px 8px #222;
        margin-right: 10px;
        margin-bottom: 10px;
      }

      footer {
        background: var(--nc-bg-2);
        border-bottom: 1px solid var(--nc-bg-3);
        padding: 2rem 1.5rem;

        margin: -2rem calc(0px - (50vw - 50%)) 2rem;

        padding-left: calc(50vw - 50%);
        padding-right: calc(50vw - 50%);

        margin-top: -0px;
        margin-bottom: 0px;
        padding-top: 6px;
        padding-bottom: 6px;
        color: gray;
        font-size: x-small;
      }

      .header-link {
        /* Main body text, see new.css */
        color: var(--nc-tx-2);
        text-decoration: none;
      }

      .nav-link-selected {
        font-weight: bold;
      }

      .search-options {
        float: right;
      }

      .highlight-icon-on > a {
        background: var(--nc-ac-1);
      }

      .highlight-icon-off > a {
        background: var(--nc-bg-2);
      }

      .invisible {
        display: none;
      }

      .socialLogo {
        padding: 0px;
        box-shadow: none;
        margin-right: 0px;
        margin-bottom: 0px;
        width: 16px;
      }

      @media only screen and (max-width: 600px) {
        .about-image {
          float: none;
        }
      }

      @media only screen and (min-width: 600px) {
        .about-image {
          float: right;
          margin-left: 25px;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <h1><a class="header-link" href="/">Hector Correa</a></h1>
      <nav>
        <a id="about-menu" href="/about">About</a>
        | <a id="presentations-menu" href="/presentations">Presentations</a>
        | <a id="blog-menu" href="/blog">Blog</a>
        <span class="search-options">
          <span>
            <a href="/search" title="Search">
              <!--Magnifying glass source: https://icons.getbootstrap.com/icons/search/ -->
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
              </svg></a>
          </span>
          <span id="highlight-menu" class="invisible">
            <a href="#" title="Toggle highlight">
              <!-- Highlighter source: https://icons.getbootstrap.com/icons/highlighter/ -->
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-highlighter" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M11.096.644a2 2 0 0 1 2.791.036l1.433 1.433a2 2 0 0 1 .035 2.791l-.413.435-8.07 8.995a.5.5 0 0 1-.372.166h-3a.5.5 0 0 1-.234-.058l-.412.412A.5.5 0 0 1 2.5 15h-2a.5.5 0 0 1-.354-.854l1.412-1.412A.5.5 0 0 1 1.5 12.5v-3a.5.5 0 0 1 .166-.372l8.995-8.07zm-.115 1.47L2.727 9.52l3.753 3.753 7.406-8.254zm3.585 2.17.064-.068a1 1 0 0 0-.017-1.396L13.18 1.387a1 1 0 0 0-1.396-.018l-.068.065zM5.293 13.5 2.5 10.707v1.586L3.707 13.5z"/>
              </svg>
            </a>
          </span>
        </span>
      </nav>
    </header>

    <div id="page-content">
      <h1>The Design of Design</h1>
<p><img width="100" height="144" align="left" src="https://hectorcorrea.com/images/designofdesign.jpg" />Earlier this month I received a draft manuscript of Frederick Brook’s latest book <a href="http://www.amazon.com/Design-Essays-Computer-Scientist/dp/0201362988">The Design of Design – essays from a computer scientist</a> <sup>[1]</sup> in which he reviews both what is design and how the design process works.</p>

<p>Although there is plenty literature on the concept of design and the design process Brooks feels there are several good reason to write another book on the subject.</p>

<p>The first reason that he mentions is that <b>the design process</b> has changed a lot since World War II and the new challenges have rarely been discussed. The new challenges that he mentions is that design is now a <b>team activity</b> rather than an individual one. Another challenge is that unlike designers of previous generations nowadays designers cannot longer built with their own hands what they design. Instead designs are captured in computer models and build by somebody else [p. xi]</p>

<p>The second reason why Brooks consider worthwhile writing a book on design is that “much mystery remains” on the subject and that this becomes “evident when we try to teach students how to design well” [p. xi] In this book Brooks uses his six decades of design experience to help expand the knowledge of how the design process works and how we teach it. In his book Brooks does not attempt to find or describe “a science of design” in fact he considers such a goal both impossible and misleading. Instead, the tone of the book is in the form of a few opinionated essays [p. xii]</p>

<p>The book is divided in six sections as follow:</p>

<ul>
<li>Section I: Models of Design
<li>Section  II: Collaboration and Telecollaboration
<li>Section  III: Design Perspectives
<li>Section  IV: A Computer Scientist’s Dream System for Designing Houses
<li>Section  V: Great Designers
<li>Section  VI: Trips through Design Spaces Case Studies
</ul>

<p>I found the first three sections of the book fascinating but was not as thrilled with the last three sections. In this review I am going to focus mostly on some selected chapters from the first three sections.</p>


<h2>Section I – Models of Design</h2>

<h3>Chapter 1 - What is design?</h3>

<p><img width="120" height="179" align="left" src="https://hectorcorrea.com/images/notredame.jpg" />On the first chapter Brooks addresses both the basic question of what is design and how the design process works. Brooks starts with the following definition of <b>the verb design</b> from the Oxford Dictionary:</p>

<blockquote>
"To form a plan or scheme of, to arrange or conceive in the mind … for later execution” [p. 4]<br/>
</blockquote>

<p>Brook uses a proposal from Dorothy Sayers to describe <b>the design process</b> as a three steps process in which an idea is conceived mentally outside time and space, then it’s implemented in time and space, and finally the implementation is used by someone else.</p>

<p>In the case of a musical composition the mental formulation (the idea) is first conceived in the composers mind then implemented in paper and ink, and finally the implementation is used by a conductor to execute it with an orchestra.</p>

<p>In a software project the same process happens when its designer conceives the idea of how the software will work, this idea is then implemented in source code, and finally the software is executed and consumed by users.</p>

<p>One of questions that Brooks tries to address in this book is whether there are invariant properties of the design process itself across multiple disciplines like the construction of buildings, software development, and other media. It’s evident that Brooks researched a wide variety of other authors and sources that have addressed the concept of design throughout history including philosophers, designers, and scientists</p>


<h3>Chapter 2 – How Engineers Think of Design – The Rational Model</h3>

<p>In the second chapter Brooks describes what he calls the <b>Rational Model</b> for the design process. This model refers to an orderly and systematic step-by-step process to the design of things. He cites several sources that have proposed this design process including German mechanical engineers and people from the software engineering field. It’s important to highlight that <b>Brooks does not support this model</b> but considers useful to present it for several reasons that he discusses throughout the book.</p>

<p>In the Rational Model the designer starts with a primary goal and a series of secondary goals. After the goals have been defined we proceed to define utility functions (the weight of each goal against the entire design), constraints and resources so that the designer can proceed with a simple and systematic approach. This is how Brooks puts it:</p>

<blockquote>
"Now, so the Rational Model goes, the designer makes a design decision. Then within the design space narrowed by that decision he makes another decision. At each node he could have taken one or more other paths, so one can think of the process of design as the systematic exploration of a design tree” [p15]<br/>
</blockquote>

<p>In software engineering the Waterfall Model is the representation of the Rational Model in which different steps of the design process happen orderly and sequentially.</p>

<p>Although in software development the Waterfall Model has fallen out of fashion among developers as we have realized how it does not fit with the realities of software development, <b>the Rational Model is still enticing to many people outside of the design process</b>. Proof of this is how, in general as an industry, we still work on contracts that require a clear requirements definition upfront, accurate estimates and timelines, and fixed bid contracts. These steps are only possible in the Rational Model where the requirements are completed ahead of time, they accurate, and the developers know exactly how these requirements are going to be implemented.</p>

<p>Brooks make an interesting observation when he notes that the Rational Model is actually a very “natural” model and evidence of this is the fact that people in multiple disciplines going from mechanical engineering to software development have arrived to it [pp. 29-30]</p>


<h3>Chapter 3 – What’s Wrong with the Rational Model?</h3>

<p><img width="100" height="150" align="left" src="https://hectorcorrea.com/images/whatswrong.jpg" />Although the Rational Model is the first model presented in the book Brooks quickly discredits it in Chapter 3 as he explains that this is just an ideal process that although somehow describes how we think the design process ought to work it is not how it works in real life [p. 22]</p>

<p>Brooks dedicates this chapter of the book to highlight why the Rational Model (or the Waterfall Model as we know if in software development) does not work.</p>

<p>Brooks states that <b>we don’t always know the goal at the onset</b>. Most of the times the goal itself changes as the design evolve and new ideas are explored. Brooks indicates that “the hardest part of the design is deciding what to design” [p. 22]. He points out that not only the design process is iterative but also the design-goal-setting process is iterative. To anyone that has worked on software development this is probably obvious and we all have stories to tell on how we typically go back and forth with the customer to decide what they really need once the software product starts to take shape. Most of the times the end goal is different than the initial goal as both the designer and the customer learn more about the problem and re-evaluate the goals, constraints, and resources.</p>

<p>Another thing that works against the Rational Model is that it is very typical that <b>the constraints and resources change</b> as the design process evolves and we know more about the problem and the end solution that we are developing.</p>

<p>In the Rational Model it is assumed that we can easily evaluate in the design tree how much value a design decision adds to the entire design (“the goodness of a decision” so to speak.) In practice this is hardly the case as most decisions are interconnected to one another. For example, in software development a particular design decision might affect significantly performance, cost, and integration. Evaluating objectively how a particular decision affects the whole design can be close to impossible.</p>

<p>Finally, although the Rational Model has been proposed by people from multiple disciplines, the reality is that <b>designers just don’t work this way</b>. Designers go back and forth and change their own designs as they go. On page 257 when talking about his own experiences as a designer, Brooks states</p>

<blockquote>
"The boldest design decisions, whoever made them, have accounted for much of the goodness of the outcome. These bold decisions were due sometimes to vision, sometimes to desperation. They were always gambles, requiring extra investment in the hopes of getting a much better result."<br/>
</blockquote>

<p>Brooks closes the third chapter with this sentence:</p>

<blockquote>
"The Waterfall Model is wrong and harmful; we must outgrow it"<br/>
</blockquote>



<h3>Chapter 5 – What are Better Design Process Models?</h3>

<p><img width="150" height="100" align="left" src="https://hectorcorrea.com/images/spiral.jpg" />After describing what’s wrong with the Rational Model, in Chapter 5 Brooks argues the need to have a dominant model to replace it. His reasoning for advocating a particular dominant model as opposed to just let one surface organically is that he is afraid that if we don’t push for one model in particular we risk having another inappropriate model surface and dominate the landscape as the Waterfall Model did in software development.</p>

<p>In particular, Brooks suggest that we use <b>Barry Boehm’s Spiral Model</b> for building software as the dominant model. The Spiral Model suggests an iterative process that more closely resembles the way designers really work. In addition this model is easy to memorize, visualize, and should help with the eradication of the Waterfall Model.</p>

<p>If you are interested in a quick summary of the Spiral Model you can find one in <a href="http://en.wikipedia.org/wiki/Spiral_model">Wikipedia</a>. The original 1988 paper by Barry Boehm can be found at the <a href="http://www.computer.org/portal/web/csdl/doi/10.1109/2.59">IEEE web site</a>.</p>

<p>Although Brooks does not reference newer development process model like the <a href="http://en.wikipedia.org/wiki/Unified_Process"">Unified Software Development Process</a> and <a href="http://www.controlchaos.com/about/">Scrum</a> these are variations on the Spiral Model originally proposed by Boehm.</p>


<h2>Section II - Collaboration and Telecollaboration</h2>

<p><img width="120" height="80" align="left" src="https://hectorcorrea.com/images/train.jpg" />In the second section of the book, Brooks addresses two changes in design that have taken since 1900. In particular Brooks discusses the challenges of doing design work in teams (as opposed to solo designs) and collaboration in distributed teams via telecommunication tools (as opposed to collocated teams.)</p>

<p>Although most people would agree that collaboration is a good thing, Brooks points out that <b>collaboration in design is not a self-evident truth and certainly not universally true</b>. [p 64] Brooks points out that “most of the great works of the human kind have been made by one mind, or two working closely.” [p. 64]</p>

<p>In chapter 6 Brooks addresses the obvious question: If design by a single mind is so good why have we shifted to team design? Brooks attribute this shift first and foremost to the technology sophistication that has taken place in engineering (whether is construction or software engineering) in the last hundred years. With the level of specialization needed in most engineering areas people have been forced to become experts in certain areas and therefore we need to bring together experts from multiple areas to get the whole picture on any given project (say a new bridge, a new cell phone, or a new large software system.) The second reason Brooks talks about is that “team design becomes a necessity when it can accelerate delivery of a new product in a competitive environment” [p. 65] and this is paramount in this day and age when (right or wrong) being first to market is a driving force behind companies working on new designs.</p>

<p>Brooks points out that collaboration does not come without a cost. In chapter 6 he talks about the costs that one incurs when a team (rather than a single person) works on a problem. In particular he talks about the cost of partitioning the job among multiple people, teach teammates and learning from them, communication cost, and change control.</p>

<p>When it comes to design work however, Brooks things that biggest challenge is that the <b>conceptual integrity of a design</b> is much harder to maintain when a team works on the design. He talks about how solo designers keep design integrity subconsciously and how this can easily be affected when the design is split among multiple minds.</p>

<p>Since the reality is that nowadays team design is the norm rather than the exception, Brooks proceeds to give ideas and steps that can be used to help teams to achieve good designs. In particular he talks about having a system architect that is in charge of making sure the integrity of the design is achieved even though multiple members of the design team might have different ideas. In Brooks words “The architect serves during the entire design process as the agent, approver, and advocate for the user as well as for all the other stakeholders” [pp. 71-72].</p>

<p>Brooks considers <b>the two-person team</b> a special case that is a very good approach to design as it forces the designers to have to state why their decisions are taken and this in turn forces a quick validation among the team [pp. 81-82] The reason for this is that two people can easily work together and maintain design integrity but somehow this does not scale well with more than two people on the team.</p>

<p>Brooks points two aspects of the design process that benefit from team collaboration. He highlights the value that a team with multiple points of view brings forth it when it comes time comes to decide what to design (the needs of the customer) and also during design review sessions.</p>

<p>In Chapter 7 Brooks addresses the challenges that a <b>distributed design team</b> faces. Brooks is very much aware that “distributed design will only increase” [p. 93] and provides several ideas to help distributed team work. In particular he talks about the value that face to face time at the beginning of a project is crucial even when a team will eventually work distributed.</p>


<h2>Section III – Design Perspectives</h2>

<p><img width="120" height="179" align="left" src="https://hectorcorrea.com/images/designperspective.jpg" />On Chapter 8 Brooks reviews the two different schools of thoughts of the Rationalists (like Rene Descartes) and Empiricists (like Galileo Galilei) and how they apply to design.</p>

<p>On Chapter 9 Brooks talks that team design makes <b>the need of explicit models</b> on what’s being designed more important than with solo designs. This is because designers in a team tend to assume that they are all sharing the same assumptions and in fact they might not. Brooks puts it like this: “If the team does not draft a common set of explicit assumptions, each designer will work with a distinct set of implicit ones” [p. 115] and then he adds “as soon as the designer starts to make explicit use models, trouble strikes: he is rudely confronted with how much he does not know. The very effort forces him to ask questions he might not otherwise have asked until much later. This is an unmitigated good” [p. 115]</p>

<p>On chapter 10 Brooks talks about resources and, on page 119, he summarizes the chapter rather succinctly:</p>

<blockquote>
"If a design, particularly a team design, is to have conceptual integrity, one should name the scare resource explicitly, track it publicly, control it firmly.”<br/>
</blockquote>

<p>There is far more insight and good advice for designers throughout the rest of the rest of the chapters of Section III of the book than I could cover on this blog post.</p>


<h2>Section IV, V and VI</h2>

<p><img width="150" height="100" align="left" alt="" src="https://hectorcorrea.com/images/punishment.jpg" />As I mentioned at beginning of this blog entry, I did not find the last three sections of the book as interesting as the first three sections.</p>

<p>In Section IV of the book (A Computer Scientist’s Dream System) Brooks describes his vision for “an ideal computer system for the architectural design of houses and other buildings. “ [p. 204] Chapter 17 presents a vision on how a person could convey a design to a machine (mind to machine) where as Chapter 18 presents the opposite, how a machine could convey to a person a design by using not only visual clues but also audio and tactile feedback.</p>

<p>In Section V Brooks addresses two different problems. In Chapter 18 he addresses the difficult question on how people and processes related to each other and the role of a process in design. This is a good chapter where Brooks describes the opposing views between the need of a design process to aim at predictability and how predictability is hardly a friend to great designs [p. 233] In Chapter 20 Brooks talks about his experience on how to developer great designers.</p>

<p>The last section of the book (Trips through Design Spaces: Case Studies) is dedicated to seven case studies in which Brook participated. This whole section was a big disappointment to me. I am not sure what Brook had in mind when he wrote this part of the book and what value he meant to add to the study of design when he included it on the book. This section includes case studies for the famous System/360 Architecture and the IBM Operating System/360 projects that Brooks managed in the 1960s and also some other personal projects including three personal constructions projects (!) to his own house as well as the design of a book on computer architectures.</p>


<h2>Summary</h2>

<p>All in all I think the first three sections of the book make the book a great reading and would recommend it to all software developers interested in improving and understanding the design process used to create software solutions.</p>


<h3>References</h3>
<p>[1] <i>The Design of Design – Essays from a computer scientist</i>; Frederick P. Brooks; Pearson Education; 2010 (Draft Manuscript as of 1/24/2010)</p>

    </div>

    <div id="search-section" class="invisible">
      <div id="search-params" class="">
        <input id="search-terms" size="50" />
        <button id="search-button">Go</button>
      </div>
      <div id="search-results">
      </div>
    </div>

    <footer>
      <a href="/tooling">Tooling</a> |
      License <a rel="license" target="_blank" href="http://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>
    </footer>

    <script type="text/javascript">
      // Redirect legacy blog URLs
      if (window.location.hash.startsWith("#/blog")) {
        window.location = window.location.toString().replace("#/blog/","blog/");
      }

      // Hande this redirect via JavaScript because GitHub pages does not let me
      // handle this via an HTML redirect due to the ".aspx" extension
      if (window.location.pathname === "/blog/The-Mythical-Man-Month.aspx") {
        window.location = "https://hectorcorrea.com/blog/2007-06-28/the-mythical-man-month";
      }

      // Mark as selected the current menu option
      var selectMenu = function() {
        var activeOption = null;
        var url = window.location.pathname;
        if (url.startsWith("/blog/")) {
          activeOption = document.getElementById("blog-menu");
        } else if(url == "/about") {
          activeOption = document.getElementById("about-menu");
        } else if(url == "/presentations") {
          activeOption = document.getElementById("presentations-menu");
        }

        if (activeOption != null) {
          activeOption.classList.add("nav-link-selected");
        }
      }

      // Show the highlight menu if there is a hl query string parameter.
      // Notice that we don't automatically highlight search terms because that's annoying on the display
      // when there are too many hits.
      var showHighlightMenu = function() {
        const queryString = window.location.search
        const urlParams = new URLSearchParams(queryString);
        if (urlParams.has("hl")) {
          var hlMenu = document.getElementById("highlight-menu");
          hlMenu.classList.remove("invisible");
        }
      }

      // Highlight search terms indicated in the URL via the
      // hl query string parameter
      var highlightSearchTerms = function() {
        const queryString = window.location.search
        const urlParams = new URLSearchParams(queryString);
        if (urlParams.has("hl")) {
          var context = document.querySelector("#page-content");
          var instance = new Mark(context);
          instance.mark(urlParams.get("hl"));
          var hlMenu = document.getElementById("highlight-menu");
          hlMenu.classList.remove("invisible");
          hlMenu.classList.add("highlight-icon-on");
          hlMenu.classList.remove("highlight-icon-off");
        }
      }

      // Unhighlight the search terms
      var unhighlightSearchTerms = function() {
        var context = document.querySelector("#page-content");
        var instance = new Mark(context);
        instance.unmark();
        var hlMenu = document.getElementById("highlight-menu");
        hlMenu.classList.remove("highlight-icon-on");
        hlMenu.classList.add("highlight-icon-off");
      }

      // Wire the button to toggle the highlight
      document.getElementById("highlight-menu").addEventListener("click", (event) => {
        var hlMenu = document.getElementById("highlight-menu");
        if (hlMenu.classList.contains("highlight-icon-on")) {
          unhighlightSearchTerms();
        } else {
          highlightSearchTerms();
        }
        event.preventDefault();
      });

      // Open external links in a new tab
      var externalLinksNewTab = function() {
        var i;
        var links = document.getElementsByTagName("A");
        for(i = 0; i < links.length; i++) {
          var externalLink = !links[i].href.startsWith(window.location.origin);
          if (externalLink) {
            // Open on a new tab
            links[i].target = "_blank"
          }
        }
      }

      selectMenu();
      showHighlightMenu();
      externalLinksNewTab();
    </script>

    <script>
      if (window.location.pathname.startsWith("/search")) {
        // Only load the search index when we are on the search page
        // since it's kind of heavy, ~200KB.
        // Source https://stackoverflow.com/a/52478867/446681
        //
        // IMPORTANT: The call to document.write() will insert the
        // dynamic <script src=/searchIndex.js> block immediately
        // after this <script> block and therefore the code to
        // reference it MUST be on a separate <script> block.
        console.log("Loaded search index");
        document.write('<script src="/searchIndex.js"><\/script>');
      }
    </script>

    <script>
      // This <script> block has access to the searchDocuments
      // variable defined in searchIndex.js (see above)
      if (window.location.pathname.startsWith("/search")) {
        // Define the Lunr index
        var lunrIndex = lunr(function () {
          this.ref('id')
          this.field('name')
          this.field('text')

          searchDocuments.forEach(function (doc) {
            if (doc.id == "/404") {
              // don't index the content of the "404 not found" page
            } else {
              this.add(doc)
            }
          }, this)
        });

        // Function to execute the search
        var runSearch = function() {
          // Clear the previous results
          const resultsEl = document.getElementById("search-results");
          resultsEl.innerHTML = "";

          // Run the search
          const searchTerms = document.getElementById("search-terms").value;
          const results = lunrIndex.search(searchTerms);

          if (results.length == 0) {
            var noResults = document.createElement("p");
            noResults.textContent = "No results found";
            resultsEl.appendChild(noResults);
            return;
          }

          // Process the results
          results.forEach(function(result) {
            // This does not work because of word stemming (e.g. ruby => rubi)
            // var matchTerms = Object.keys(result.matchData.metadata).join(" ");
            var matchDoc = searchDocuments.find(x => x.id === result.ref)
            var linkEl = document.createElement("a");
            linkEl.href = matchDoc.id + "?hl=" + searchTerms;
            linkEl.text = matchDoc["name"];

            var resultEl = document.createElement("p");
            resultEl.appendChild(linkEl);

            resultsEl.appendChild(resultEl);
          });
        }

        // Make the search section visible
        document.getElementById("search-section").classList.remove("invisible");

        // Wire the click even in the search button
        document.getElementById("search-button").addEventListener("click", (event) => {
          runSearch();
        });

        // Wire the enter key on the search textbox
        // Source https://stackoverflow.com/a/46063448/446681
        document.getElementById("search-terms").addEventListener("keyup", (event) => {
          if (event.key === "Enter") {
            runSearch();
          }
        });

        // Give the focus to the search box
        document.getElementById("search-terms").focus();
      }
    </script>
  </body>
</html>
